# Система анализа метрик производительности статических анализаторов

## Краткий обзор

Аналитическая платформа представляет собой систему для автоматизированного сбора, анализа и визуализации метрик производительности статических анализаторов Python-кода. Система состоит из трех компонентов:

-   **Фронтенд** (Vue.js) - пользовательский интерфейс для управления анализом и визуализации результатов
-   **API-сервис** (FastAPI) - обрабатывает запросы, хранит данные, взаимодействует с сервисом запуска
-   **Сервис запуска анализаторов** (FastAPI, Go) - выполняет клонирование репозиториев, запуск инструментов и сбор метрик

Система собирает следующие метрики анализаторов:

-   Время выполнения (секунды)
-   Использование ЦП (процент)
-   Использование памяти (КБ)

## Использование системы

### Запуск анализа

1. Откройте веб-интерфейс системы
2. В поле поиска начните вводить название анализатора, выберите его из выпадающего списка
3. Введите URL GitHub-репозитория, который должен быть проанализирован
4. При необходимости укажите шаблон команды для анализатора (необязательно)
5. Нажмите кнопку "Запустить анализ"
6. Дождитесь завершения анализа (процесс отображается в модальном окне)

### Анализ результатов

После завершения анализа результаты будут представлены в трех вкладках:

1. **Сводка** - таблица с агрегированными метриками по каждому инструменту
2. **Графики** - визуализация результатов:
    - Столбчатые диаграммы средних значений метрик
    - Диаграммы размаха (boxplot) для анализа распределения метрик
3. **Детальные данные** - полная таблица всех собранных метрик

Результаты можно скачать в формате CSV для дальнейшего анализа.

## Развертывание

### Предварительные требования

-   Python 3.11+
-   Node.js 18+
-   Docker и Docker Compose (для развертывания в продакшене)
-   Go 1.21.5+

### Локальное развертывание

1. **API-сервис**:

```bash
cd api_service
pip install -e .
cp .env.example .env  # Отредактируйте согласно вашим настройкам (можно не менять)
uvicorn main:app --reload
```

2. **Сервис запуска**:

```bash
cd runner_service
pip install -e .
cp .env.example .env  # Отредактируйте согласно вашим настройкам (можно не менять)
go build -o metrics_collector metrics_collector.go  # Компиляция Go-утилиты для сбора метрик
uvicorn main:app --reload
```

3. **Фронтенд**:

```bash
cd frontend
npm install
cp .env.example .env  # Настройте VITE_API_URL
npm run dev
```

### Docker-развертывание

Система поддерживает развертывание через Docker Compose:

```bash
docker-compose up -d --build
```

Это запустит все три сервиса и настроит связи между ними.

### CI/CD-процесс

Проект использует GitHub Actions для непрерывной интеграции и развертывания:

1. **Тестирование**:

    - При каждом push в ветку master запускаются автоматические тесты
    - Выполняется проверка кода с помощью линтеров и статических анализаторов
    - Собираются и тестируются Docker-образы

2. **Развертывание**:

    - При успешном слиянии в master-ветку происходит автоматическое развертывание
    - Все сервисы приложения разворачиваются на VPS с использованием Docker

Конфигурации CI/CD находятся в директории `.github/workflows/`.
